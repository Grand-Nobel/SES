[global]
log-level-file=detail
start-fast=y
stop-auto=y
parallel-jobs=4
compress-type=zst
compress-level=3
repo1-cipher-type=aes-256-cbc
repo1-cipher-pass=${PGBACKREST_REPO1_PASS} # Injected from Secret Store
repo2-cipher-type=aes-256-cbc
repo2-cipher-pass=${PGBACKREST_REPO2_PASS} # Injected from Secret Store

# Primary Backup Repo (e.g., Local Region S3)
[repo1]
type=s3
bucket=ses-db-backups-prod-use1 # Replace with actual bucket name
region=us-east-1 # Replace with actual region
retention-full=30
retention-archive=14
retention-archive-type=incr

# DR Backup Repo (e.g., DR Region S3)
[repo2]
type=s3
bucket=ses-db-backups-prod-euw1 # Replace with actual bucket name
region=eu-west-1 # Replace with actual region
retention-full=7
retention-archive=7
retention-archive-type=incr

[ses-pg-cluster-prod-use1] # Stanza name matching Patroni cluster
pg1-path=/var/lib/postgresql/data
backup-standby=y